language: cpp

dist: bionic

addons:
  apt:
    sources:
      - deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-12 main
      - deb-src http://apt.llvm.org/bionic/ llvm-toolchain-bionic-12 main
    packages:
      - clang-format

on:
  pull_request:
    branches:
    - main

script: 
  - clang-format for file in $(find . -iname '*.cpp' -or -iname '*.h' -and -not -iname 'doctest.h' ); do diff -u <(cat "$file") <(clang-format "$file") || exit 1; done
